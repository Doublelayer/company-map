(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{37:function(e,t,n){e.exports=n.p+"static/media/map-marker.0147d86c.svg"},38:function(e,t,n){e.exports=n.p+"static/media/user-marker.ea45ba00.svg"},43:function(e,t,n){e.exports=n(74)},50:function(e,t,n){},71:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(13),i=n.n(c),r=(n(48),n(49),n(50),n(23)),s=n.n(r),l=n(31),u=n(32),h=n(15),d=n(41),p=n(33),m=n(3),g=n(42),f=(n(52),n(9)),y=n.n(f),b=n(89),S=n(88),v=n(78),E=n(90),w=n(34),O=n.n(w),j=n(24),k=n.n(j),C=n(36),A=n.n(C),R=n(87),L=n(79),I=n(80),M=n(81),x=n(82),P=n(83),U=n(84),z=n(85),B=n(86),F=n(37),N=n.n(F),T=n(38),D=n.n(T),J="localhost"===window.location.hostname?"http://localhost:5000/api/v1/":"https://api.guestm.app/api/v1/messages";var H="https://ipapi.co/json/";n(71);var W=y.a.icon({iconUrl:N.a,iconSize:[50,82],popupAnchor:[0,-20]}),_=y.a.icon({iconUrl:D.a,iconSize:[50,82],popupAnchor:[0,-20]}),V={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},$=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={pageIsLoading:!0,apiFetching:!1,modal:!1,location:{latitude:0,longitude:0},city:null,haveUserLoacation:!1,zoom:2,sectorList:[],selectedSectorsArray:[],companies:[],selectedCity:[],citys:[]},n.setUserLocation=n.setUserLocation.bind(Object(m.a)(n)),n.success=n.success.bind(Object(m.a)(n)),n.getCurrentPositionError=n.getCurrentPositionError.bind(Object(m.a)(n)),n.toggleInfoModal=n.toggleInfoModal.bind(Object(m.a)(n)),n.sectorSubmit=n.sectorSubmit.bind(Object(m.a)(n)),n.selectMultipleOption=n.selectMultipleOption.bind(Object(m.a)(n)),n.selectCityOption=n.selectCityOption.bind(Object(m.a)(n)),n.asyncSearchCitys=n.asyncSearchCitys.bind(Object(m.a)(n)),n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"sectorSubmit",value:function(){var e=this;(function(e){return fetch("".concat(J,"companies/findbysectors"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.warn("ERROR(".concat(e.code,") : ").concat(e.message))}))})({city:this.state.city,sectors:this.state.selectedSectorsArray}).then((function(t){e.setState({companies:t,apiFetching:!1})}))}},{key:"toggleInfoModal",value:function(){this.setState((function(e){return{modal:!e.modal}}))}},{key:"setUserLocation",value:function(e){this.setState({location:{latitude:e.latitude,longitude:e.longitude},city:e.city,selectedCity:e.city,haveUserLoacation:!0,zoom:14})}},{key:"success",value:function(e){var t,n=this;(t=e.coords,fetch("https://www.geocode.xyz/".concat(t.latitude,",").concat(t.longitude,"?json=1")).then((function(e){return e.json()})).then((function(e){return{latitude:t.latitude,longitude:t.longitude,city:e.city}})).catch((function(e){return console.warn("ERROR(".concat(e.code,") : ").concat(e.message))}))).then((function(e){n.setUserLocation(e),n.setState({})}))}},{key:"getCurrentPositionError",value:function(){var e=this;fetch(H).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.warn("ERROR(".concat(e.code,") : ").concat(e.message))})).then((function(t){e.setUserLocation(t),e.setState({modal:!0}),e.forceUpdate()}))}},{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([navigator.geolocation.getCurrentPosition(this.success,this.getCurrentPositionError,V),fetch("".concat(J,"companies/sectors")).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.warn("ERROR(".concat(e.code,") : ").concat(e.message))})).then((function(e){t.setState({sectorList:e})}))]).then((function(){t.setState({pageIsLoading:!1})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"selectMultipleOption",value:function(e){this.setState({selectedSectorsArray:e})}},{key:"selectCityOption",value:function(e){var t,n=this;this.setState({selectedCity:e,pageIsLoading:!0}),(t=e,fetch("https://www.geocode.xyz/".concat(t,"+de?json=1")).then((function(e){return e.json()})).then((function(e){return{latitude:e.latt,longitude:e.longt,city:t}})).catch((function(e){return console.warn("ERROR(".concat(e.code,") : ").concat(e.message))}))).then((function(e){n.setUserLocation(e),n.sectorSubmit()})).then((function(){n.setState({pageIsLoading:!1})}))}},{key:"asyncSearchCitys",value:function(e){var t=this;e.length>=2&&function(e){return fetch("".concat(J,"city/searchcity"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({input:e})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.warn("ERROR(".concat(e.code,") : ").concat(e.message))}))}(e).then((function(e){t.setState({citys:e})}))}},{key:"render",value:function(){var e=this.state,t=e.sectorList,n=e.selectedSectorsArray,a=e.companies,c=e.modal,i=e.haveUserLoacation,r=e.zoom,s=e.pageIsLoading,l=e.apiFetching,u=e.selectedCity,h=e.citys,d=[this.state.location.latitude,this.state.location.longitude],p=n.length>0;return o.a.createElement("div",null,o.a.createElement(A.a,{className:"map-container",active:s,spinner:!0,text:"Einen Augenblick bitte . . . "},o.a.createElement(b.a,{className:"map",center:d,zoom:r},o.a.createElement(S.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),i?o.a.createElement(v.a,{position:d,icon:_}):"",a.map((function(e){return o.a.createElement(v.a,{key:e._id,position:[e.latitude,e.longitude],icon:W},o.a.createElement(E.a,null,o.a.createElement("a",{href:e.homepage,target:"_blank"},e.name),o.a.createElement("br",null),e.street," ",e.housenumber))}))),o.a.createElement(R.a,{isOpen:c,toggleInfoModal:this.toggleInfoModal},o.a.createElement(L.a,{toggleInfoModal:this.toggleInfoModal},"Hinweis zur Standortermittlung"),o.a.createElement(I.a,null,"Du hast die Standortermittlung nicht erlaubt. Dein Standort wurde anhand deiner IP-Adresse ermittelt!"),o.a.createElement(M.a,null,o.a.createElement(x.a,{color:"primary",onClick:this.toggleInfoModal},"Okay"))),s?"":o.a.createElement(P.a,{body:!0,className:"search-form"},o.a.createElement(U.a,null,"Auswahl der Firmenbranche"),o.a.createElement(z.a,null,o.a.createElement(B.a,null,"Suche nach einer anderen Stadt."),l?o.a.createElement(O.a,{css:"text-align:center; padding-top:20px",color:"#0066a6",loading:!0}):o.a.createElement("div",null,o.a.createElement(k.a,{id:"picky-city",value:u,options:h,multiple:!1,includeFilter:!0,onChange:this.selectCityOption,getFilterValue:this.asyncSearchCitys,allSelectedPlaceholder:"Alle ausgew\xe4hlt",filterPlaceholder:"z.B.: Berlin"}),o.a.createElement(B.a,null,"Bitte w\xe4hle deine gesuchte Branche aus."),o.a.createElement(k.a,{id:"picky-sector",value:n,options:t,multiple:!0,includeSelectAll:!0,includeFilter:!0,onChange:this.selectMultipleOption,placeholder:"Branche",selectAllText:"Alle ausw\xe4hlen",numberDisplayed:0,manySelectedPlaceholder:"%s ausgew\xe4hlt",allSelectedPlaceholder:"Alle ausgew\xe4hlt"}),o.a.createElement(x.a,{className:"btn-form",onClick:this.sectorSubmit,disabled:!p},"Suchen"))))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[43,1,2]]]);
//# sourceMappingURL=main.3e2ecb87.chunk.js.map